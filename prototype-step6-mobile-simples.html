<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Step 6 - Disponibilidade (Mobile)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { -webkit-tap-highlight-color: transparent; }
    body { overflow-x: hidden; }
    .checkbox-item, .radio-item {
      min-height: 56px;
      touch-action: manipulation;
    }
    .checkbox-item.selected {
      animation: selectPulse 0.3s ease;
    }
    @keyframes selectPulse {
      0% { transform: scale(1); }
      50% { transform: scale(0.98); }
      100% { transform: scale(1); }
    }
    .section-divider {
      height: 12px;
      background: linear-gradient(to bottom, #f9fafb, #ffffff);
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- Header Fixo -->
  <div class="bg-white border-b sticky top-0 z-10 shadow-sm">
    <div class="p-4">
      <div class="flex items-center justify-between mb-2">
        <button class="text-blue-600 font-medium">â† Voltar</button>
        <span class="text-sm text-gray-600">Etapa 6 de 7</span>
      </div>
      <h1 class="text-xl font-bold text-gray-900">Sua Disponibilidade</h1>
      <p class="text-sm text-gray-600 mt-1">Selecione os dias que vocÃª pode treinar</p>
    </div>
  </div>

  <div class="pb-32">
    <!-- SEÃ‡ÃƒO 1: Dias de Corrida -->
    <div class="bg-white p-4 mb-3">
      <div class="flex items-start gap-3 mb-4">
        <span class="text-3xl">ğŸƒ</span>
        <div>
          <h2 class="text-lg font-bold text-gray-900">Quais dias vocÃª pode correr?</h2>
          <p class="text-sm text-gray-600">Selecione todos os dias possÃ­veis</p>
        </div>
      </div>

      <div class="space-y-2" id="running-days">
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="0" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">Domingo</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="1" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">Segunda-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="2" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">TerÃ§a-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="3" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">Quarta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="4" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">Quinta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="5" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">Sexta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-blue-600" value="6" onchange="updateRunning()">
          <span class="flex-1 font-medium text-gray-900">SÃ¡bado</span>
        </label>
      </div>

      <div id="running-count" class="mt-3 text-sm text-gray-600 text-center">
        Nenhum dia selecionado
      </div>
    </div>

    <div class="section-divider"></div>

    <!-- SEÃ‡ÃƒO 2: Dia do LongÃ£o (aparece sÃ³ se tem dias de corrida) -->
    <div id="longrun-section" class="bg-white p-4 mb-3 hidden">
      <div class="flex items-start gap-3 mb-4">
        <span class="text-3xl">ğŸ“…</span>
        <div>
          <h2 class="text-lg font-bold text-gray-900">Qual serÃ¡ o dia do longÃ£o?</h2>
          <p class="text-sm text-gray-600">A corrida mais longa da semana</p>
        </div>
      </div>

      <div id="longrun-days" class="space-y-2">
        <!-- Preenchido dinamicamente -->
      </div>

      <div class="mt-3 p-3 bg-blue-50 rounded-lg text-sm text-gray-700">
        ğŸ’¡ <strong>Dica:</strong> Recomendamos sÃ¡bado ou domingo, quando vocÃª tem mais tempo
      </div>
    </div>

    <div class="section-divider"></div>

    <!-- SEÃ‡ÃƒO 3: MusculaÃ§Ã£o -->
    <div class="bg-white p-4 mb-3">
      <div class="flex items-start gap-3 mb-4">
        <span class="text-3xl">ğŸ’ª</span>
        <div>
          <h2 class="text-lg font-bold text-gray-900">Quais dias vocÃª faz musculaÃ§Ã£o?</h2>
          <p class="text-sm text-gray-600">Opcional - deixe em branco se nÃ£o faz</p>
        </div>
      </div>

      <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg mb-3 cursor-pointer">
        <input type="checkbox" class="w-5 h-5" id="no-gym" onchange="toggleGym()">
        <span class="text-sm font-medium text-gray-700">NÃ£o faÃ§o musculaÃ§Ã£o</span>
      </label>

      <div id="gym-days" class="space-y-2">
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="0">
          <span class="flex-1 font-medium text-gray-900">Domingo</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="1">
          <span class="flex-1 font-medium text-gray-900">Segunda-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="2">
          <span class="flex-1 font-medium text-gray-900">TerÃ§a-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="3">
          <span class="flex-1 font-medium text-gray-900">Quarta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="4">
          <span class="flex-1 font-medium text-gray-900">Quinta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="5">
          <span class="flex-1 font-medium text-gray-900">Sexta-feira</span>
        </label>
        
        <label class="checkbox-item flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50 cursor-pointer">
          <input type="checkbox" class="w-6 h-6 text-green-600" value="6">
          <span class="flex-1 font-medium text-gray-900">SÃ¡bado</span>
        </label>
      </div>

      <div id="gym-count" class="mt-3 text-sm text-gray-600 text-center">
        Nenhum dia selecionado
      </div>
    </div>

    <div class="section-divider"></div>

    <!-- SEÃ‡ÃƒO 4: Outras Atividades (Colapsadas) -->
    <div class="bg-white p-4">
      <h2 class="text-lg font-bold text-gray-900 mb-3">ğŸ¯ Outras Atividades</h2>
      <p class="text-sm text-gray-600 mb-4">Opcional - adicione se praticar outros esportes</p>

      <div class="space-y-2">
        <button onclick="toggleActivity('natacao')" class="w-full flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">ğŸŠ</span>
            <span class="font-medium text-gray-900">NataÃ§Ã£o</span>
          </div>
          <span id="natacao-toggle" class="text-blue-600 font-medium">Abrir</span>
        </button>
        <div id="natacao-content" class="hidden pl-4 space-y-2 mt-2">
          <!-- Lista de dias aqui -->
        </div>

        <button onclick="toggleActivity('ciclismo')" class="w-full flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">ğŸš´</span>
            <span class="font-medium text-gray-900">Ciclismo</span>
          </div>
          <span id="ciclismo-toggle" class="text-blue-600 font-medium">Abrir</span>
        </button>

        <button onclick="toggleActivity('yoga')" class="w-full flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg active:bg-gray-50">
          <div class="flex items-center gap-3">
            <span class="text-2xl">ğŸ§˜</span>
            <span class="font-medium text-gray-900">Yoga</span>
          </div>
          <span id="yoga-toggle" class="text-blue-600 font-medium">Abrir</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Resumo Fixo no RodapÃ© -->
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg">
    <div class="p-4">
      <button onclick="toggleSummary()" class="w-full flex items-center justify-between p-3 bg-blue-50 rounded-lg mb-3">
        <span class="font-semibold text-blue-900">ğŸ“Š Ver Resumo da Semana</span>
        <span id="summary-toggle" class="text-blue-600">â–¼</span>
      </button>
      
      <div id="summary-content" class="hidden mb-3 p-3 bg-gray-50 rounded-lg text-sm max-h-48 overflow-y-auto">
        <div id="summary-list"></div>
      </div>

      <button class="w-full bg-blue-600 text-white font-semibold py-4 rounded-lg active:bg-blue-700">
        Continuar â†’
      </button>
    </div>
  </div>

  <script>
    const dayNames = ['Domingo', 'Segunda', 'TerÃ§a', 'Quarta', 'Quinta', 'Sexta', 'SÃ¡bado'];
    let selectedRunningDays = new Set();
    let selectedGymDays = new Set();
    let longRunDay = null;

    function updateRunning() {
      const checkboxes = document.querySelectorAll('#running-days input[type="checkbox"]');
      selectedRunningDays.clear();
      
      checkboxes.forEach(cb => {
        const label = cb.closest('label');
        if (cb.checked) {
          selectedRunningDays.add(parseInt(cb.value));
          label.classList.add('selected', 'bg-blue-50', 'border-blue-500');
          label.classList.remove('border-gray-200');
        } else {
          label.classList.remove('selected', 'bg-blue-50', 'border-blue-500');
          label.classList.add('border-gray-200');
        }
      });

      // Atualizar contador
      const count = selectedRunningDays.size;
      document.getElementById('running-count').textContent = 
        count === 0 ? 'Nenhum dia selecionado' :
        count === 1 ? '1 dia selecionado' :
        `${count} dias selecionados`;

      // Mostrar/esconder seÃ§Ã£o do longÃ£o
      if (count > 0) {
        updateLongRunSection();
        document.getElementById('longrun-section').classList.remove('hidden');
      } else {
        document.getElementById('longrun-section').classList.add('hidden');
        longRunDay = null;
      }

      updateSummary();
    }

    function updateLongRunSection() {
      const container = document.getElementById('longrun-days');
      container.innerHTML = '';

      Array.from(selectedRunningDays).sort((a, b) => a - b).forEach(day => {
        const isWeekend = day === 0 || day === 6;
        const label = document.createElement('label');
        label.className = 'radio-item flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer';
        label.innerHTML = `
          <input type="radio" name="longrun" value="${day}" class="w-6 h-6 text-purple-600" onchange="selectLongRun(${day})">
          <span class="flex-1 font-medium text-gray-900">${dayNames[day]}</span>
          ${isWeekend ? '<span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">Recomendado</span>' : ''}
        `;
        
        if (longRunDay === day) {
          label.classList.add('bg-purple-50', 'border-purple-500');
          label.querySelector('input').checked = true;
        } else {
          label.classList.add('border-gray-200');
        }
        
        container.appendChild(label);
      });
    }

    function selectLongRun(day) {
      longRunDay = day;
      updateLongRunSection();
      updateSummary();
    }

    function toggleGym() {
      const noGym = document.getElementById('no-gym').checked;
      const gymDays = document.getElementById('gym-days');
      
      if (noGym) {
        gymDays.style.opacity = '0.5';
        gymDays.style.pointerEvents = 'none';
        gymDays.querySelectorAll('input').forEach(cb => cb.checked = false);
        selectedGymDays.clear();
      } else {
        gymDays.style.opacity = '1';
        gymDays.style.pointerEvents = 'auto';
      }
      
      updateSummary();
    }

    function toggleActivity(name) {
      const content = document.getElementById(`${name}-content`);
      const toggle = document.getElementById(`${name}-toggle`);
      
      if (content.classList.contains('hidden')) {
        content.classList.remove('hidden');
        toggle.textContent = 'Fechar';
      } else {
        content.classList.add('hidden');
        toggle.textContent = 'Abrir';
      }
    }

    function toggleSummary() {
      const content = document.getElementById('summary-content');
      const toggle = document.getElementById('summary-toggle');
      
      if (content.classList.contains('hidden')) {
        content.classList.remove('hidden');
        toggle.textContent = 'â–²';
      } else {
        content.classList.add('hidden');
        toggle.textContent = 'â–¼';
      }
    }

    function updateSummary() {
      const summary = document.getElementById('summary-list');
      let html = '';

      dayNames.forEach((day, index) => {
        const activities = [];
        
        if (selectedRunningDays.has(index)) {
          if (longRunDay === index) {
            activities.push('<strong>ğŸƒ LONGÃƒO â­</strong>');
          } else {
            activities.push('ğŸƒ Corrida');
          }
        }
        
        if (selectedGymDays.has(index)) {
          activities.push('ğŸ’ª MusculaÃ§Ã£o');
        }

        const activityText = activities.length > 0 ? activities.join(' + ') : 'ğŸ›Œ Descanso';
        html += `<div class="flex justify-between py-1"><span class="font-medium">${day}:</span><span>${activityText}</span></div>`;
      });

      const totalDays = new Set([...selectedRunningDays, ...selectedGymDays]).size;
      html += `<div class="mt-2 pt-2 border-t text-center font-semibold text-blue-600">${totalDays} dias ativos</div>`;

      summary.innerHTML = html;
    }

    // Inicializar
    updateSummary();
  </script>
</body>
</html>
